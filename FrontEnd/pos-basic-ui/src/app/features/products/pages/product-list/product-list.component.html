<div id="gestion" class="view-content section">
  <div class="flex justify-between items-center mb-4">
    <h2 class="text-xl font-semibold">Gestión de Productos</h2>
    <button
      (click)="toggleAddProductModal(true)"
      class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"
    >
      + Nuevo Producto
    </button>
  </div>
  <div class="overflow-x-auto">
    <table class="table">
      <thead>
        <tr class="bg-gray-100">
          <th>SKU Base</th>
          <th>Nombre</th>
          <th>Categoría</th>
          <th>Variantes</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>CAM-POL</td>
          <td>Camisa Polo</td>
          <td>Ropa</td>
          <td>4 (S, M, L, XL / Azul, Blanco)</td>
          <td>
            <button class="text-blue-600 hover:underline text-sm">
              Editar
            </button>
          </td>
        </tr>
        <tr>
          <td>PANT-VAQ</td>
          <td>Pantalón Vaquero</td>
          <td>Ropa</td>
          <td>6 (30, 32, 34 / Azul, Negro)</td>
          <td>
            <button class="text-blue-600 hover:underline text-sm">
              Editar
            </button>
          </td>
        </tr>
        <tr>
          <td>GOR-BAS</td>
          <td>Gorra Básica</td>
          <td>Accesorios</td>
          <td>1 (Única)</td>
          <td>
            <button class="text-blue-600 hover:underline text-sm">
              Editar
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<app-modal [(shown)]="showAddProduct" title="Crear Nuevo Producto">
  <div class="border p-3 rounded mb-3">
    <h4 class="font-medium mb-2 text-sm">Información Base</h4>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
      <div>
        <label class="block text-xs font-medium text-gray-700 mb-1"
          >Nombre Producto</label
        >
        <input
          type="text"
          placeholder="Ej: Camiseta Estampada"
          class="w-full p-1 border border-gray-300 rounded text-sm"
        />
      </div>
      <div>
        <label class="block text-xs font-medium text-gray-700 mb-1"
          >Categoría</label
        >
        <select class="w-full p-1 border border-gray-300 rounded text-sm">
          <option>Ropa</option>
          <option>Calzado</option>
          <option>Accesorios</option>
        </select>
      </div>
      <div>
        <label class="block text-xs font-medium text-gray-700 mb-1"
          >SKU Base (Opcional)</label
        >
        <input
          type="text"
          placeholder="Ej: CAM-EST"
          class="w-full p-1 border border-gray-300 rounded text-sm"
        />
      </div>
    </div>
  </div>

  <div class="border p-3 rounded mb-3">
    <h4 class="font-medium mb-2 text-sm">
      Opciones y Valores (para Variantes)
    </h4>
    <div class="space-y-2">
      <div>
        <input
          type="text"
          value="Talla"
          class="p-1 border border-gray-300 rounded text-sm mr-2"
        />
        <input
          type="text"
          placeholder="Valores separados por coma: S, M, L, XL"
          class="flex-grow p-1 border border-gray-300 rounded text-sm"
        />
      </div>
      <div>
        <input
          type="text"
          value="Color"
          class="p-1 border border-gray-300 rounded text-sm mr-2"
        />
        <input
          type="text"
          placeholder="Valores separados por coma: Rojo, Azul, Verde"
          class="flex-grow p-1 border border-gray-300 rounded text-sm"
        />
      </div>
    </div>
    <button class="text-blue-600 hover:underline text-xs mt-2">
      + Añadir otra opción
    </button>
  </div>

  <div class="border p-3 rounded mb-4">
    <h4 class="font-medium mb-2 text-sm">Variantes Generadas</h4>
    <p class="text-xs text-gray-600 mb-2">
      Define SKU, Precio y Stock para cada combinación.
    </p>
    <div class="max-h-40 overflow-y-auto">
      <table class="table text-xs">
        <thead>
          <tr>
            <th>Talla</th>
            <th>Color</th>
            <th>SKU Variante</th>
            <th>Precio Venta</th>
            <th>Stock Inicial</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>S</td>
            <td>Rojo</td>
            <td><input type="text" class="w-20 p-1 border" /></td>
            <td><input type="number" class="w-20 p-1 border" /></td>
            <td><input type="number" class="w-16 p-1 border" /></td>
          </tr>
          <tr>
            <td>S</td>
            <td>Azul</td>
            <td><input type="text" class="w-20 p-1 border" /></td>
            <td><input type="number" class="w-20 p-1 border" /></td>
            <td><input type="number" class="w-16 p-1 border" /></td>
          </tr>
          <tr>
            <td>M</td>
            <td>Rojo</td>
            <td><input type="text" class="w-20 p-1 border" /></td>
            <td><input type="number" class="w-20 p-1 border" /></td>
            <td><input type="number" class="w-16 p-1 border" /></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="flex justify-end gap-2">
    <button
      (click)="toggleAddProductModal(false)"
      class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded"
    >
      Cancelar
    </button>
    <button
      (click)="toggleAddProductModal(false)"
      class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"
    >
      Guardar Producto
    </button>
  </div>
</app-modal>
